<!-- filepath: c:\Users\USER\Desktop\Green Hostels\frontend\project-root\templates\admin\transactions.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Transactions - Admin</title>
  <link rel="stylesheet" href="/static/css/admin_sidebar.css" />
  <link rel="stylesheet" href="/static/css/admin_transactions.css" />
</head>
<body>
  <div class="dashboard-wrapper flex">
    {% include 'admin/admin_sidebar.html' %}
    <div class="main-section">
      <h1>Manage Transactions</h1>
      <form method="POST" action="/admin/transactions/add" class="transaction-form">
        <input type="number" name="floor_number" placeholder="Floor Number" required>
        <input type="text" name="room_number" placeholder="Room Number" required>
        <input type="text" name="tenant_name" placeholder="Tenant Name" required>
        <input type="number" name="required_amount" placeholder="Required Amount" required>
        <input type="number" name="submitted_amount" placeholder="Amount Submitted" required>
        <input type="date" name="check_in" placeholder="Check In Date">
        <input type="date" name="check_out" placeholder="Check Out Date">
        <button type="submit">Add Transaction</button>
      </form>
      <h2>All Transactions</h2>
      <ul class="transaction-list">
        {% for t in transactions %}
        <li class="{% if t.required_amount == t.submitted_amount %}transaction-complete{% endif %}">
          <div class="trans-room">Room: {{ t.room_number }} (Floor {{ t.floor_number }})</div>
          <div class="trans-tenant">Tenant: {{ t.tenant_name }}</div>
          <div class="trans-amounts">
            Required: ₦{{ t.required_amount }} | Submitted: ₦{{ t.submitted_amount }}
          </div>
          <div class="trans-dates">
            Check-in: {{ t.check_in }} | Check-out: {{ t.check_out }}
          </div>
          <form method="POST" action="/admin/transactions/edit" class="edit-form">
            <input type="hidden" name="id" value="{{ t.id }}">
            <input type="number" name="required_amount" value="{{ t.required_amount }}" required>
            <input type="number" name="submitted_amount" value="{{ t.submitted_amount }}" required>
            <input type="date" name="check_in" value="{{ t.check_in }}">
            <input type="date" name="check_out" value="{{ t.check_out }}">
            <button type="submit">Save</button>
          </form>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
<script>
function toggleSidebar() {
  var sidebar = document.getElementById('sidebar');
  sidebar.classList.toggle('collapsed');
  var mainSection = document.querySelector('.main-section');
  if (mainSection) {
    mainSection.classList.toggle('expanded');
  }
}
</script>

</body>
</html>